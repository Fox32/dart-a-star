import "dart:collection" as u;import "dart:html" as HB;import "dart:math" as IB;class RB{final  canvas;final  l;final  BB;final  LB;final  KB;final  width;final  height;final  bB;final  aB;final  EB;final  DB;RB(h,g):canvas=h,BB=g,LB=g.start,KB=g.AB,l=h.getContext("2d"),width=h.width,height=h.height,bB=g.n.length,aB=g.n[0].length,EB=h.width/g.n[0].length,DB=h.height/g.n[0].length;ZB( g){var h=coords(g);l.beginPath();if(g.CB){l.fillStyle='red';}else{l.fillStyle='black';}l.arc(h[0],h[1],5,0,IB.PI*2,true);l.fill();}YB( h){var g=coords(h);l.beginPath();l.strokeStyle='blue';l.arc(g[0],g[1],15,0,IB.PI*2,true);l.stroke();}UB( h){var g=coords(h);l.beginPath();l.strokeStyle='green';l.arc(g[0],g[1],15,0,IB.PI*2,true);l.stroke();}VB( i, k){var g=coords(i);var h=coords(k);l.beginPath();l.strokeStyle='black';l.moveTo(g[0],g[1]);l.lineTo(h[0],h[1]);l.stroke();}coords( g){var h=(g.x+1)*EB-(EB/2);var i=(g.y+1)*DB-(DB/2);return [h,i];}WB(){for(var g=0;g<BB.n.length;g++ ){var i=BB.n[g];for(var h=0;h<i.length;h++ ){var k=i[h];ZB(k);}}YB(LB);UB(KB);}XB( i){var g;i.forEach(( h){if(g==null){g=h;}else{VB(g,h);g=h;}});}} SB( g){g.context2D.clearRect(0,0,g.width,g.height);var h=new v.lB(width:10,height:10);var i=new RB(g,h);i.WB();var k=TB(h);i.XB(k);}main(){var g=HB.query('#surface');var h=HB.query('#b')..onClick.listen((i)=>SB(g));}class gB{const gB();}class hB{final  name;const hB(this.name);}class iB{const iB();}class v{var n;var start;var AB;v(this.n,this.start,this.AB);factory v.lB({ width, height}){if(width==null)throw new ArgumentError('width must not be null');if(height==null)throw new ArgumentError('height must not be null');var m=new IB.Random();var g=new List<List<j>>();for(int h=0;h<height;h++ ){var k=new List<j>();for(int i=0;i<width;i++ ){k.add(new j(i,h,m.nextBool()));}g.add(k);}return new v(g,g[0][0],g[height-1][width-1]);}}class j{final  x,y;final  CB;final  mB;final  nB;var oB=-1;var pB=-1;var qB=-1;var rB=-1;j( g, h, i):x=g,y=h,CB=i,mB="${g},${h}".hashCode,nB='[X:${g}, Y:${h}, Obs:${i}]'; toString()=>nB; get hashCode=>mB; operator==( g){return x==g.x&&y==g.y;}} JB( g, h){var i=g.x-h.x;var k=g.y-h.y;return i*i+k*k;} TB( FB){var t=FB.n;var MB=FB.start;var q=FB.AB;var cB=t.length;var dB=t[0].length;var i=<j>[] ;var s=<j>[] ;var eB=0;var fB=JB(MB,q);var kB=eB+fB;i.add(MB);while (i.length>0){var NB=i[0].oB;var GB=0;for(int g=1;g<i.length;g++ ){if(i[g].oB<NB){NB=i[g].oB;GB=g;}}var h=i[GB];if(h==q){var OB=new u.Queue<j>.from([q]);while (h.rB!=-1){h=s[h.rB];OB.addFirst(h);}return OB;}i.removeAt(GB);s.add(h);for(int m=IB.max(0,h.x-1);m<=IB.min(dB-1,h.x+1);m++ ){for(int o=IB.max(0,h.y-1);o<=IB.min(cB-1,h.y+1);o++ ){if(!t[o][m].CB||(q.x==m&&q.y==o)){var PB=false;for(int g=0;g<s.length;g++ ){if(s[g].x==m&&s[g].y==o){PB=true;break;}}if(PB){continue;}var QB=false;for(int g=0;g<i.length;g++ ){if(i[g].x==m&&i[g].y==o){QB=true;break;}}if(!QB){var k=t[o][m];k.rB=s.length-1;k.pB=h.pB+IB.sqrt(IB.pow(k.x-h.x,2)+IB.pow(k.y-h.y,2)).floor().toInt();k.qB=JB(k,q);k.oB=k.pB+k.qB;i.add(k);}}}}}return new u.Queue<j>();}